(()=>{"use strict";const t=document.querySelector("[data-cart]"),e=document.querySelector(".cart"),n=document.querySelectorAll("[data-close]"),c=document.querySelector(".cart_wrapper"),o=document.querySelector(".clear");function r(){e.style.left="30px",e.style.opacity=1}function s(){e.style.left="-570px",e.style.opacity=0}const a=document.querySelector("[data-modal]"),i=document.querySelectorAll(".inputs_modal"),l=document.querySelector(".modal"),d=document.querySelectorAll("[data-close]"),u=document.querySelector(".modal_content");function p(){l.style.cssText="\n\t\topacity: 1;\n\t\tpointer-events: visible;\n\t",u.style.cssText="\n\t\ttransform: scale(1);\n\t",document.body.style.overflow="hidden"}function m(){l.style.cssText="\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t",u.style.cssText="\n\t\ttranform: scale(0);\n\t",document.body.style.overflow=""}function y(){i.forEach((t=>{t.value=""}))}const v=()=>{const t=document.querySelector("form"),e="img/form/spinner.svg",n="Thanks for sign in!",c="Something went wrong...";function o(t){const e=document.querySelector(".modal_dialog");e.style.display="none",p();const n=document.createElement("div");n.classList.add("modal_dialog"),n.innerHTML=`\n\t\t\t<div class="modal__dinamic_content">\n\t\t\t\t<h1 class="modal_title">${t}</h1>\n\t\t\t</div>\n\t\t`,document.querySelector(".modal").append(n),setTimeout((()=>{n.remove(),e.style.display="block",m()}),3e3)}!function(t){t.addEventListener("submit",(r=>{r.preventDefault();const s=document.createElement("img");s.src=e,s.style.cssText="\n\t\t\tdisplay: block;\n\t\t\tmargin: 0 auto;\n\t\t",t.append(s);const a=new FormData(t);(async(t,e)=>{const n=await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:e});return await n.json()})("http://localhost:3000/requests",JSON.stringify(Object.fromEntries(a.entries()))).then((()=>{o(n),s.remove()})).catch((()=>{o(c)})).finally((()=>{t.reset()}))}))}(t)},f=()=>{class t{constructor(t,e,n,c,o,r,...s){this.src=t,this.alt=e,this.name=n,this.price=c,this.id=o,this.classes=s,this.parent=document.querySelector(r),this.transfer=27}render(){const t=document.createElement("div");t.innerHTML=`\n\t\t\t\t<div data-id="${this.id}" class="tiles">\n\t\t\t\t\t<img class="tile_img" src="${this.src}" alt="${this.alt}">\n\t\t\t\t\t<p class="tile_text">${this.name}</p>\n\t\t\t\t\t<p class="price"><span data-price>${this.price}</span>$</p>\n\t\t\t\t\t<button data-add class="tile_add">Add to cart</button>\n\t\t\t\t</div>\n\t\t\t `,this.parent.append(t)}}(async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Couldn't fetch ${t}, status: ${e.status}`);return await e.json()})("http://localhost:3000/products").then((e=>{e.forEach((({img:e,altimg:n,name:c,price:o,id:r})=>{new t(e,n,c,o,r,".block_tiles").render()}))}))};window.addEventListener("DOMContentLoaded",(()=>{(()=>{function e(){const t=document.querySelector(".cart_wrapper"),e=document.querySelector("[data-cart-empty]"),n=document.querySelector("[data-cart-full]");t.children.length>0?(e.style.display="none",n.style.display="flex",o.style.display="block"):(e.style.display="block",n.style.display="none",o.style.display="none",s())}function a(){const t=document.querySelectorAll(".product");let e=document.querySelector(".current_price"),n=0;t.forEach((t=>{const e=t.querySelector("[data-counter]").innerText,c=t.querySelector("[data-price]").innerText;n+=+e*+c})),e.innerText=Number(n).toFixed(2)}n.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),s()}))})),t.addEventListener("click",(t=>{t.preventDefault(),r()})),o.addEventListener("click",(()=>{document.querySelectorAll(".product").forEach((t=>t.remove()))})),window.addEventListener("click",(t=>{(t=>{let n;"plus"!==t.target.dataset.action&&"minus"!==t.target.dataset.action||(n=t.target.closest(".block-btns_counter").querySelector("[data-counter]")),"plus"===t.target.dataset.action&&n.innerText<10&&(n.innerText=++n.innerText,a()),"minus"===t.target.dataset.action&&(n.innerText=--n.innerText,t.target.closest(".product")&&0===parseInt(n.innerText)&&(t.target.closest(".product").remove(),e()),a()),t.target===o&&e()})(t),(t=>{if(t.target.hasAttribute("data-add")){const n=t.target.closest(".tiles"),o={id:n.dataset.id,imgSrc:n.querySelector(".tile_img").getAttribute("src"),title:n.querySelector(".tile_text").innerText,price:n.querySelector("[data-price]").innerText},s=c.querySelector(`[data-id='${o.id}']`);if(s){const t=s.querySelector("[data-counter]");t.innerText<10&&t.innerText++}else{let t=`\n\t\t\t\t<div data-id="${o.id}" class="product">\n\t\t\t\t\t<img class="product_img" src="${o.imgSrc}" alt="product" class="product_img">\n\t\t\t\t\t<div class="block-name_btns">\n\t\t\t\t\t\t<p class="product_name">${o.title}</p>\n\t\t\t\t\t<div class="block-btns_counter">\n\t\t\t\t\t\t<button data-action="minus" class="current_btns">-</button>\n\t\t\t\t\t\t<div data-counter class="product_counter">1</div>\n\t\t\t\t\t\t<button data-action="plus" class="current_btns">+</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="block-cart_price">\n\t\t\t\t\t\t<p class="price"><span data-price>${o.price}</span>$</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;c.insertAdjacentHTML("beforeend",t),r()}e(),a()}})(t)}))})(),v(),d.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),m(),y()}))})),a.addEventListener("click",(t=>{t.preventDefault(),p(),s()})),window.addEventListener("click",(t=>{t.target===l&&(m(),y())})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&(m(),y())})),f(),function(t,e,n){let c=0;t.addEventListener("click",(()=>{c+=935.17,c>2805.51&&(c=0),n.style.left=-c+"px"})),e.addEventListener("click",(()=>{c-=935.17,c<0&&(c=2805.51),n.style.left=-c+"px"}))}(document.querySelector("[data-next]"),document.querySelector("[data-prev]"),document.querySelector(".slider-line")),(()=>{const t=document.querySelectorAll(".text__options-tabs"),e=document.querySelectorAll(".pictures_tabs");function n(){e.forEach((t=>t.style.display="none")),t.forEach((t=>t.classList.remove("text__options_tabs-active")))}function c(n=0){e[n].style.display="block",t[n].classList.add("text__options_tabs-active")}document.querySelector(".tabs-parent").addEventListener("click",(e=>{const o=e.target;o&&o.classList.contains("text__options-tabs")&&t.forEach(((t,e)=>{o==t&&(n(),c(e))}))})),n(),c()})(),window.addEventListener("scroll",(()=>{const t=document.querySelector(".navigation"),e=document.body.scrollTop;console.log(e),t.style.right=e>=2024.800048828125?-80:50}))}))})();