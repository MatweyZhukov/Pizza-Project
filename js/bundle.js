(()=>{"use strict";const t=document.querySelector("[data-modal]"),e=document.querySelectorAll(".inputs_modal"),n=document.querySelector(".modal"),c=document.querySelectorAll("[data-close]"),s=document.querySelector(".modal_content");function r(){n.style.cssText="\n\t\topacity: 1;\n\t\tpointer-events: visible;\n\t",s.style.cssText="\n\t\ttransform: scale(1);\n\t",document.body.style.overflow="hidden"}function a(){n.style.cssText="\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t",s.style.cssText="\n\t\ttranform: scale(0);\n\t",document.body.style.overflow=""}function o(){e.forEach((t=>{t.value=""}))}const i=()=>{const t=document.querySelector("form"),e="img/form/spinner.svg",n="Thanks for sign in!",c="Something went wrong...";function s(t){const e=document.querySelector(".modal_dialog");e.style.display="none",r();const n=document.createElement("div");n.classList.add("modal_dialog"),n.innerHTML=`\n\t\t\t<div class="modal__dinamic_content">\n\t\t\t\t<h1 class="modal_title">${t}</h1>\n\t\t\t</div>\n\t\t`,document.querySelector(".modal").append(n),setTimeout((()=>{n.remove(),e.style.display="block",a()}),3e3)}!function(t){t.addEventListener("submit",(r=>{r.preventDefault();const a=document.createElement("img");a.src=e,a.style.cssText="\n\t\t\tdisplay: block;\n\t\t\tmargin: 0 auto;\n\t\t",t.append(a);const o=new FormData(t);(async(t,e)=>{const n=await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:e});return await n.json()})("http://localhost:3000/requests",JSON.stringify(Object.fromEntries(o.entries()))).then((()=>{s(n),a.remove()})).catch((()=>{s(c)})).finally((()=>{t.reset()}))}))}(t)},l=()=>{class t{constructor(t,e,n,c,s,r,...a){this.src=t,this.alt=e,this.name=n,this.price=c,this.id=s,this.classes=a,this.parent=document.querySelector(r),this.transfer=27}render(){const t=document.createElement("div");t.innerHTML=`\n\t\t\t\t<div data-id="${this.id}" class="tiles">\n\t\t\t\t\t<img class="tile_img" src="${this.src}" alt="${this.alt}">\n\t\t\t\t\t<p class="tile_text">${this.name}</p>\n\t\t\t\t\t<p class="price"><span data-price>${this.price}</span>$</p>\n\t\t\t\t\t<button data-add class="tile_add">Add to cart</button>\n\t\t\t\t</div>\n\t\t\t `,this.parent.append(t)}}(async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Couldn't fetch ${t}, status: ${e.status}`);return await e.json()})("http://localhost:3000/products").then((e=>{e.forEach((({img:e,altimg:n,name:c,price:s,id:r})=>{new t(e,n,c,s,r,".block_tiles").render()}))}))};window.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.querySelector("[data-cart]"),e=document.querySelector(".cart"),n=document.querySelectorAll("[data-close]"),c=document.querySelector(".cart_wrapper");function s(){e.style.left="30px",e.style.opacity="100%"}function r(){e.style.left="-570px",e.style.opacity="0%"}function a(){const t=document.querySelector(".cart_wrapper"),e=document.querySelector("[data-cart-empty]"),n=document.querySelector("[data-cart-full]");t.children.length>0?(e.style.display="none",n.style.display="flex"):(e.style.display="block",n.style.display="none",r())}function o(){const t=document.querySelectorAll(".product");let e=document.querySelector(".current_price"),n=0;t.forEach((t=>{const e=t.querySelector("[data-counter]").innerText,c=t.querySelector("[data-price]").innerText;n+=+e*+c})),e.innerText=Number(n).toFixed(2)}n.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),r()}))})),t.addEventListener("click",(t=>{t.preventDefault(),s()})),window.addEventListener("click",(t=>{(t=>{let e;"plus"!==t.target.dataset.action&&"minus"!==t.target.dataset.action||(e=t.target.closest(".block-btns_counter").querySelector("[data-counter]")),"plus"===t.target.dataset.action&&e.innerText<10&&(e.innerText=++e.innerText,o()),"minus"===t.target.dataset.action&&(e.innerText=--e.innerText,t.target.closest(".product")&&0===parseInt(e.innerText)&&(t.target.closest(".product").remove(),a()),o())})(t),(t=>{if(t.target.hasAttribute("data-add")){const e=t.target.closest(".tiles"),n={id:e.dataset.id,imgSrc:e.querySelector(".tile_img").getAttribute("src"),title:e.querySelector(".tile_text").innerText,price:e.querySelector("[data-price]").innerText},r=c.querySelector(`[data-id='${n.id}']`);if(r){const t=r.querySelector("[data-counter]");t.innerText<10&&t.innerText++}else{let t=`\n\t\t\t\t<div data-id="${n.id}" class="product">\n\t\t\t\t\t<img class="product_img" src="${n.imgSrc}" alt="product" class="product_img">\n\t\t\t\t\t<div class="block-name_btns">\n\t\t\t\t\t\t<p class="product_name">${n.title}</p>\n\t\t\t\t\t<div class="block-btns_counter">\n\t\t\t\t\t\t<button data-action="minus" class="current_btns">-</button>\n\t\t\t\t\t\t<div data-counter class="product_counter">1</div>\n\t\t\t\t\t\t<button data-action="plus" class="current_btns">+</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="block-cart_price">\n\t\t\t\t\t\t<p class="price"><span data-price>${n.price}</span>$</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;c.insertAdjacentHTML("beforeend",t),s()}a(),o()}})(t)}))})(),i(),c.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),a(),o()}))})),t.addEventListener("click",(t=>{t.preventDefault(),r()})),window.addEventListener("click",(t=>{t.target===n&&(a(),o())})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&(a(),o())})),l(),function(t,e,n){let c=0;t.addEventListener("click",(()=>{c+=935.17,c>2805.51&&(c=0),n.style.left=-c+"px"})),e.addEventListener("click",(()=>{c-=935.17,c<0&&(c=2805.51),n.style.left=-c+"px"}))}(document.querySelector("[data-next]"),document.querySelector("[data-prev]"),document.querySelector(".slider-line")),(()=>{const t=document.querySelectorAll(".text__options-tabs"),e=document.querySelectorAll(".pictures_tabs");function n(){e.forEach((t=>t.style.display="none")),t.forEach((t=>t.classList.remove("text__options_tabs-active")))}function c(n=0){e[n].style.display="block",t[n].classList.add("text__options_tabs-active")}document.querySelector(".tabs-parent").addEventListener("click",(e=>{const s=e.target;s&&s.classList.contains("text__options-tabs")&&t.forEach(((t,e)=>{s==t&&(n(),c(e))}))})),n(),c()})(),(()=>{const t=document.querySelector(".navigation");setTimeout((()=>{t.style.cssText="\n\t \tright: 50;\n\t "}),3e3)})()}))})();